{"_path":"/kyverno-plugin/development","_dir":"kyverno-plugin","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Local Development","description":"","position":31,"category":"Kyverno Plugin","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"local-development"},"children":[{"type":"text","value":"Local Development"}]},{"type":"element","tag":"h2","props":{"id":"requirements"},"children":[{"type":"text","value":"Requirements"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Go >= v1.19"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"(optional) Kubernetes Cluster with "},{"type":"element","tag":"a","props":{"href":"https://kyverno.io"},"children":[{"type":"text","value":"Kyverno"}]},{"type":"text","value":" installed"}]}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Fork and/or checkout "},{"type":"element","tag":"a","props":{"href":"https://github.com/kyverno/policy-reporter-kyverno-plugin","target":"_blank"},"children":[{"type":"text","value":"Policy Reporter Kyverno plugin on GitHub"}]}]},{"type":"element","tag":"h3","props":{"id":"install-dependencies"},"children":[{"type":"text","value":"Install dependencies"}]},{"type":"element","tag":"code","props":{"code":"go get ./...\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"./..."}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"unit-tests"},"children":[{"type":"text","value":"Unit Tests"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Run unit tests locally with"}]},{"type":"element","tag":"code","props":{"code":"make test\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"test"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"code","props":{"code":"go test -v ./... -timeout=10s\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e904b"},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"./..."}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e904b"},"children":[{"type":"text","value":"-timeout=10s"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"running-kyverno-plugin"},"children":[{"type":"text","value":"Running Kyverno Plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To run the Kyverno plugin locally, you must connect it to a Kubernetes cluster. This is required because it connects to the Kubernetes API to watch for Kyverno Policies and ClusterPolicies. The configuration can be done via CLI arguments, "},{"type":"element","tag":"a","props":{"href":"/kyverno-plugin/16-config-reference","target":"_blank"},"children":[{"type":"text","value":"config.yaml"}]},{"type":"text","value":", or a mix of both."}]},{"type":"element","tag":"code","props":{"code":"go run main.go run -k ~/.kube/config\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"main.go"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e904b"},"children":[{"type":"text","value":"-k"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"~/.kube/config"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"argument-reference"},"children":[{"type":"text","value":"Argument Reference"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Argument"}]},{"type":"element","tag":"th","props":{"align":"center"},"children":[{"type":"text","value":"Short"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Default"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--kubeconfig"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-k"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"path to the kubeconfig file,"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"used to connect to the Kubernetes API"}]},{"type":"element","tag":"td","props":{"align":null},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--config"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-c"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"path to the Policy Reporter config file"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config.yaml"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--metrics-enabled"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-m"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"enables the Metrics API endpoints"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--rest-enabled"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-r"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"enables the REST API endpoints"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"--port"}]}]},{"type":"element","tag":"td","props":{"align":"center"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"-p"}]}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"text","value":"used port for the HTTP server"}]},{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"8080"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"compile-and-run-policy-reporter"},"children":[{"type":"text","value":"Compile and run Policy Reporter"}]},{"type":"element","tag":"code","props":{"code":"make build\n\n./build/kyverno-plugin run -k ~/.kube/config\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"make"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"build"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6e904b"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1c479f"},"children":[{"type":"text","value":"/build/kyverno-plugin"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6e904b"},"children":[{"type":"text","value":"-k"}]},{"type":"element","tag":"span","props":{"class":"ct-18bf80"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-97804f"},"children":[{"type":"text","value":"~/.kube/config"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6e904b{color:#0550AE}\n.ct-97804f{color:#0A3069}\n.ct-18bf80{color:#24292F}\n.ct-1c479f{color:#953800}\n.dark .ct-1c479f{color:#FFA657}\n.dark .ct-18bf80{color:#C9D1D9}\n.dark .ct-97804f{color:#A5D6FF}\n.dark .ct-6e904b{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"requirements","depth":2,"text":"Requirements"},{"id":"getting-started","depth":2,"text":"Getting started","children":[{"id":"install-dependencies","depth":3,"text":"Install dependencies"},{"id":"unit-tests","depth":3,"text":"Unit Tests"}]},{"id":"running-kyverno-plugin","depth":2,"text":"Running Kyverno Plugin","children":[{"id":"argument-reference","depth":3,"text":"Argument Reference"},{"id":"compile-and-run-policy-reporter","depth":3,"text":"Compile and run Policy Reporter"}]}]}},"_type":"markdown","_id":"content:04. kyverno-plugin:development.md","_source":"content","_file":"04. kyverno-plugin/development.md","_extension":"md"}